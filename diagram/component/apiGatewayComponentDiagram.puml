@startuml
!include <C4/C4_Component>

title TripTop -  ApiGateway component Diagram

!define DottedRel_U(from,to,label) from -[dashed]up-> to : label
!define DottedRel_D(from,to,label) from -[dashed]down-> to : label
!define DottedRel_L(from,to,label) from -[dashed]left-> to : label
!define DottedRel_R(from,to,label) from -[dashed]right-> to : label

Container(frontend, "Frontend", "React.JS", "Webapplicatie waar de gebruiker zich inlogt en de reis kan plannen")

Boundary(system, "Triptop", "ApiGateway Systeem") {
    Component(auth, "Authentication", "Spring boot Component")
    Component(cache, "Cache component")
}

Container_Ext(id_provider, "Identity Provider", WireMock, "<<Extern Systeem>>\nAuthenticeert gebruikers en geeft token terug")

Rel_D(frontend, auth, "Verstuurt api verzoek", Http/JSON)

DottedRel_R(auth, id_provider, "Controleert of gebruiker geauthenticeerd is")
Rel_L(auth, cache, "Checkt of de token al bekend is.")

SHOW_LEGEND()

@enduml
