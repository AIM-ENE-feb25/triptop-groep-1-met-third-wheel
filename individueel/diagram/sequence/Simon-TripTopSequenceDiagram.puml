@startuml
title Triptop Api Gateway Sequence

participant "Client" as client
participant "InboundRequestFilter" as filter
participant "AuthStrategyFactory" as factory
participant "AuthStrategy" as strategy

client -> filter: HTTP Request

filter -> factory: authStrategy = getStrategy(strategyType)

filter -> filter: headers = getHeader(httpRequest)

filter -> strategy: isAuthenticated = authenticate(headers)

alt isAuthenticated == true
    filter --> Backend: forward request
else
    filter --> client: return 401 Unauthorized
end

deactivate filter

@enduml